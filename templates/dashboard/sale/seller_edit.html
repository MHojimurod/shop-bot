{% extends 'dashboard/base.html' %}
{% load static %}
{% block content %}
<section class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1>Маҳсулотни таҳрирлаш</h1> <!-- Changed heading to "Edit Product" -->
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a href="{% url 'home' %}">Асосий</a></li>
                    <li class="breadcrumb-item active">Маҳсулотни таҳрирлаш</li> <!-- Adjusted breadcrumb -->
                </ol>
            </div>
        </div>
    </div><!-- /.container-fluid -->
</section>
<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <!-- Adjust form action to submit to the edit URL, passing the instance ID -->
                <form method="post" action="{% url 'promocodes-edit' pk=form.instance.pk %}"
                    enctype="multipart/form-data" class="ml-3">
                    {% csrf_token %}
                    <!-- Assuming 'pk' field or a hidden field for identifying the record is no longer necessary
                       since the form action URL already includes the object's ID.
                       If still needed for other purposes, ensure it's correctly handled in the view. -->

                    <div class="row">
                        <!-- Rendered form fields remain unchanged -->



                        <div class="col-4">
                            <div class="form-group">
                                <label>Tg ID</label><br>
                                {{form.chat_id}}
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="form-group">
                                <label>ismi</label><br>
                                {{form.name}}
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="form-group">
                                <label>Raqami</label><br>
                                {{form.phone}}
                            </div>
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-4">
                            <div class="form-group">
                                <label>Tili</label><br>
                                {{form.language}}
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="form-group">
                                <label>Viloyati</label><br>
                                {{form.region}}
                            </div>
                        </div>





                    </div>

                    <div class="">
                        <!-- Adjusted button label to reflect "Save" rather than "Add" -->
                        <button type="submit" class="btn col-sm-1 btn-primary">Сақлаш</button>
                        <button type="button" onclick="history.back()" class="btn col-sm-1 btn-secondary">
                            Ортга
                        </button>
                    </div>
                </form>

                <div class="card-body table-responsive p-0 mk-">
                    <div class="col-sm-6">
                        <h3>Маҳсулотни таҳрирлаш</h3> <!-- Changed heading to "Edit Product" -->
                    </div>
                    <table id="example1" class="table table-bordered table-striped">
                        <thead>
                            <tr>
                                <th>№</th>
                                <th>Car</th>
                                <th>Letter</th>
                                <th>Order</th>
                                <th>Code</th>
                                <th>SERIA</th>
                                <th>YUTUQLAR</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for i in form.instance.promocodes.all %}

                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ i.car.name }}</td>
                                <td>{{ i.letter }}</td>
                                <td>{{ i.order }}</td>
                                <!-- <td>{{ i.diller.name }}</td> -->
                                <td>{{ i.code }}</td>
                                <td>{{ i.seria }}</td>
                                <td>{{ i.gifts_text_seller|upper|safe }}</td>


                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>


        </div>
    </div>
    </div>
</section>
{% endblock %}
